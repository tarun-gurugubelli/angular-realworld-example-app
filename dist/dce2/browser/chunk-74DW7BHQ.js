import{a as k,b as M}from"./chunk-CLUI7Q6N.js";import{a as b}from"./chunk-RHCJJ7XN.js";import{Aa as c,Ba as D,Ca as f,Fa as C,Ha as y,O as L,P as g,Qa as I,U as x,V as E,Z as T,cb as N,da as n,ea as O,gb as P,la as S,ma as p,oa as A,pa as _,qa as u,ra as d,sa as o,ta as l,ua as F,va as w,wa as v,xa as h}from"./chunk-LMBD4G5S.js";var G=e=>["/article",e];function B(e,t){if(e&1&&(o(0,"li",5),c(1),l()),e&2){let s=t.$implicit;n(),f(" ",s," ")}}var q=(()=>{let t=class t{toggleFavorite(i){this.article.favorited=i,i?this.article.favoritesCount++:this.article.favoritesCount--}};t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=g({type:t,selectors:[["app-article-preview"]],inputs:{article:"article"},standalone:!0,features:[C],decls:14,vars:8,consts:[[1,"article-preview"],[3,"article"],[1,"pull-xs-right",3,"toggle","article"],[1,"preview-link",3,"routerLink"],[1,"tag-list"],[1,"tag-default","tag-pill","tag-outline"]],template:function(a,r){a&1&&(o(0,"div",0)(1,"app-article-meta",1)(2,"app-favorite-button",2),v("toggle",function(R){return r.toggleFavorite(R)}),c(3),l()(),o(4,"a",3)(5,"h1"),c(6),l(),o(7,"p"),c(8),l(),o(9,"span"),c(10,"Read more..."),l(),o(11,"ul",4),u(12,B,2,1,"li",5,_),l()()()),a&2&&(n(),p("article",r.article),n(),p("article",r.article),n(),f(" ",r.article.favoritesCount," "),n(),p("routerLink",y(6,G,r.article.slug)),n(2),D(r.article.title),n(2),D(r.article.description),n(4),d(r.article.tagList))},dependencies:[k,M,N],encapsulation:2});let e=t;return e})();var m=function(e){return e.NOT_LOADED="NOT_LOADED",e.LOADING="LOADING",e.LOADED="LOADED",e}(m||{});var Q=(e,t)=>t.slug,V=e=>({active:e});function j(e,t){e&1&&(o(0,"div",0),c(1,"Loading articles..."),l())}function U(e,t){if(e&1&&F(0,"app-article-preview",1),e&2){let s=t.$implicit;p("article",s)}}function z(e,t){e&1&&(o(0,"div",0),c(1,"No articles are here... yet."),l())}function H(e,t){if(e&1){let s=w();o(0,"li",3)(1,"button",4),v("click",function(){let a=x(s).$implicit,r=h(2);return E(r.setPageTo(a))}),c(2),l()()}if(e&2){let s=t.$implicit,i=h(2);p("ngClass",y(2,V,s===i.currentPage)),n(2),f(" ",s," ")}}function J(e,t){if(e&1&&(u(0,U,1,1,"app-article-preview",1,Q,!1,z,2,0,"div",0),o(3,"nav")(4,"ul",2),u(5,H,3,4,"li",3,_),l()()),e&2){let s=h();d(s.results),n(5),d(s.totalPages)}}var me=(()=>{let t=class t{set config(i){i&&(this.query=i,this.currentPage=1,this.runQuery())}constructor(i){this.articlesService=i,this.results=[],this.currentPage=1,this.totalPages=[],this.loading=m.NOT_LOADED,this.LoadingState=m,this.destroyRef=L(T)}setPageTo(i){this.currentPage=i,this.runQuery()}runQuery(){this.loading=m.LOADING,this.results=[],this.limit&&(this.query.filters.limit=this.limit,this.query.filters.offset=this.limit*(this.currentPage-1)),this.articlesService.query(this.query).pipe(P(this.destroyRef)).subscribe(i=>{this.loading=m.LOADED,this.results=i.articles,this.totalPages=Array.from(new Array(Math.ceil(i.articlesCount/this.limit)),(a,r)=>r+1)})}};t.\u0275fac=function(a){return new(a||t)(O(b))},t.\u0275cmp=g({type:t,selectors:[["app-article-list"]],inputs:{limit:"limit",config:"config"},standalone:!0,features:[C],decls:2,vars:2,consts:[[1,"article-preview"],[3,"article"],[1,"pagination"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"click"]],template:function(a,r){a&1&&S(0,j,2,0,"div",0)(1,J,7,1,"nav"),a&2&&(A(r.loading===r.LoadingState.LOADING?0:-1),n(),A(r.loading===r.LoadingState.LOADED?1:-1))},dependencies:[q,I],styles:[".page-link[_ngcontent-%COMP%]{cursor:pointer}"]});let e=t;return e})();export{me as a};
